 Arduino to javascript
=========================

This exercise shows how to control a web application with arduino board. When arduino is connected to computer, it establishes virtual serial link between arduino and PC. By opening this port (e.g. COM4:) on PC, we can observe all transmitted data from arduino. We will use the "serwebproxy" utility for creating a link between arduino and web browser. This utility translates all traffic from serial port to websockets wich can be easily manipulated in javascript. Then we need to design some simple protocol for exchanging the informations. For simplicity we will use the "eval" command for everything that was read from serial port. Eval command evaluates a string expression. For example: eval("test=123"); declares a variable "test" and initializes it's value to 123. By doing this we do not need to parse the strings coming from arduino. 
There is a small problem that all incoming data from arduino is randomly framed and therefore we can not evaluate every string that is continuously read. For example, following arduino command Serial.print("alert('this is a message');\n") could result in multiple received buffers "alert('this ", "is a mess", "age');\n". So before evaluating the string we need to ensure that it was correctly reconstructed. The reconstruction is done by appending the freshly read buffer on to a global buffer, and then we look for end of line character "\n" in this global buffer and split it into multiple lines and these lines we will pass to the eval function. This means that every command sent from arduino must be finished with new line character "\n".

Task 1:
  Look at the base/pong.html program. It is a pong game written in javascript. Get familiar with the code and try locating the code wich is affecting the position of bottom paddle.

Task 2:
  Write a simple arduino program that sends periodically some information (e.g. potentiometer value) through serial link. Learn how to use Serial.begin, Serial.print and Serial.println. Verify your code by looking at the serial console (Ctrl+Shift+S in arduino IDE)

Task 3:
  Configure serwebproxy (modify comm_ports of proxy/serwebproxy.cfg) and test the proxy/index.html with web browser (firefox). If necessary, use Device Manager (right click on Computer in Start menu -> Manage -> System Tools -> Device Manager -> Ports) to find out the serial port of arduino board.

Task 4:
  Try the minimalistic version of proxy client (proxy/minimal.html), see the output in (alt -> Tools -> Web developer -> Web console -> Console) console (all debug messages generated by console.log are shown there)

Task 5:
  Attach joystick or potentiometer to arduino board and write a program that sends periodically message "adc=XXX;" where XXX is the actual value of ADC representing the output from joystick/potentiometer.

Task 6:
  Modify the pong game so you can control the position of bottom paddle with joystick.

Task 7:
  Compare your code and changes with result/ folder.

Task 8:
  If you are using joystick, modify your arduino code & javascript code so you can control the vertical position of the paddle on the canvas.

Task 9:
  Write an arduino program that shows alert window when the joystick is pressed. (use "alert" function), or changes the background color of web page (document.body.style.background = "#ff0000";) or changes the size of paddles or ball. Be careful when mixing quotation marks and apostrophes. Javascript allows using apostrophes as well as quotation marks for defining string values. In C/C++ we need to use escape slash character. E.g. Serial.print("alert('Hello!');\n") is the same as Serial.print("alert(\"Hello!\");\n")
